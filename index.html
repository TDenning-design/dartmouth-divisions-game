<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Find that Dartmouth Division</title>
 <style>
  :root {
    --dartmouth-green: #00693e;
    --light-bg: #f8f9fa;
    --light-border: #ccc;
    --error-red: #c62828;
    --success-green: #2e7d32;
  }

  body {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    padding: 20px;
    background: var(--light-bg);
    color: #222;
  }

  h1 {
    text-align: center;
    color: var(--dartmouth-green);
  }

  .score {
    font-size: 18px;
    margin-bottom: 10px;
    text-align: center;
  }

  .controls {
    text-align: center;
    margin-bottom: 20px;
  }

  .game-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 30px;
  }

  .draggables, .categories {
    width: 100%;
    max-width: 45%;
  }

  .draggables div {
    background: #fff;
    border: 2px solid var(--dartmouth-green);
    padding: 10px;
    margin: 6px 0;
    cursor: grab;
    border-radius: 4px;
    transition: background 0.2s ease;
  }

  .draggables div:hover {
    background: #e6f2ec;
  }

  .category {
    background: #e6f2ec;
    padding: 12px;
    margin: 15px 0;
    border: 2px dashed var(--dartmouth-green);
    min-height: 100px;
    border-radius: 6px;
    transition: background-color 0.3s;
  }

  .category h3 {
    margin-top: 0;
    color: var(--dartmouth-green);
  }

  .matched {
    background: #c8e6c9 !important;
    border-color: var(--success-green) !important;
    cursor: default;
  }

  .incorrect {
    background: #ffcdd2 !important;
    border-color: var(--error-red) !important;
  }

  button {
    background: var(--dartmouth-green);
    color: #fff;
    border: none;
    padding: 10px 16px;
    font-size: 14px;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background: #004d2b;
  }

  @media (max-width: 768px) {
    .game-container {
      flex-direction: column;
      align-items: center;
    }

    .draggables, .categories {
      width: 90%;
      max-width: none;
    }
  }
</style>

</head>
<body>

  <h1>Find that Dartmouth Division</h1>
  <div class="score">
    Score: <span id="score">0</span> / 13 |
    Incorrect Attempts: <span id="errors">0</span>
  </div>
  <div class="controls">
    <button onclick="resetGame()">🔄 Reset Game</button>
  </div>

  <div class="game-container">
    <div class="draggables" id="draggables"></div>
    <div class="categories">
      <div class="category" data-category="Dean of Faculty">
        <h3>Dean of Faculty</h3>
      </div>
      <div class="category" data-category="Dean of Undergraduate Student Affairs">
        <h3>Dean of Undergraduate Student Affairs</h3>
      </div>
      <div class="category" data-category="Dean of Undergraduate Education">
        <h3>Dean of Undergraduate Education</h3>
      </div>
    </div>
  </div>

  <script>
  const initialItems = {
    "Arts and Humanities Division": "Dean of Faculty",
    "International and Interdisciplinary Studies": "Dean of Faculty",
    "Sciences Division": "Dean of Faculty",
    "Social Sciences Division": "Dean of Faculty",
    "Faculty Development": "Dean of Faculty",
    "Residential Life Division": "Dean of Undergraduate Student Affairs",
    "Student Life Division": "Dean of Undergraduate Student Affairs",
    "Associate Dean of Student Affairs": "Dean of Undergraduate Student Affairs",
    "Undergraduate Research and Advising": "Dean of Undergraduate Education",
    "Pre-Major Advising": "Dean of Undergraduate Education",
    "Guarini Institute for International Education": "Dean of Undergraduate Education",
    "Registrar": "Dean of Undergraduate Education",
    "Student Support Division": "Dean of Undergraduate Education"
  };

  let items = {};
  let score = 0;
  let errors = 0;
  let attempts = 0;
  let gameOver = false;
  const maxAttempts = 2; // Player can reset twice (third attempt blocks)

  const total = Object.keys(initialItems).length;

  const draggablesContainer = document.getElementById('draggables');
  const scoreDisplay = document.getElementById('score');
  const errorDisplay = document.getElementById('errors');

  function sanitizeId(text) {
    return text.toLowerCase().replace(/[^a-z0-9]/g, "-");
  }

  function resetGame() {
    if (attempts >= maxAttempts) {
      alert("You really thought Todd would let you take this for a third time? No way, no how!");
      return;
    }

    attempts++;
    score = 0;
    errors = 0;
    gameOver = false;
    items = { ...initialItems };

    scoreDisplay.textContent = score;
    errorDisplay.textContent = errors;

    draggablesContainer.innerHTML = '';
    document.querySelectorAll('.category').forEach(zone => {
      zone.innerHTML = `<h3>${zone.dataset.category}</h3>`;
      zone.classList.remove('incorrect');
    });

    const shuffled = Object.entries(items).sort(() => Math.random() - 0.5);
    shuffled.forEach(([name, category]) => {
      const div = document.createElement('div');
      div.textContent = name;
      div.id = sanitizeId(name);
      div.setAttribute('draggable', true);
      div.dataset.category = category;

      div.addEventListener('dragstart', e => {
        if (gameOver) return;
        e.dataTransfer.setData('text/plain', div.id);
      });

      draggablesContainer.appendChild(div);
    });
  }

  document.querySelectorAll('.category').forEach(zone => {
    zone.addEventListener('dragover', e => {
      if (!gameOver) e.preventDefault();
    });

    zone.addEventListener('drop', e => {
      if (gameOver) return;

      e.preventDefault();
      const id = e.dataTransfer.getData('text/plain');
      const dragged = document.getElementById(id);
      if (!dragged) return;

      const name = dragged.textContent;
      const correctCategory = items[name];
      const targetCategory = zone.dataset.category;

      if (correctCategory === targetCategory) {
        dragged.classList.add('matched');
        dragged.setAttribute('draggable', false);
        zone.appendChild(dragged);
        score++;
        delete items[name];
        scoreDisplay.textContent = score;
        zone.classList.remove('incorrect');
      } else {
        zone.classList.add('incorrect');
        errors++;
        errorDisplay.textContent = errors;
      }

      if (errors > 3) {
        alert("❌ You failed the game with too many incorrect attempts.");
        gameOver = true;
      }

      if (score === total) {
        gameOver = true;
        setTimeout(() => {
          if (errors === 0 && attempts === 1) {
            alert("Wow, great work! Sian, is that you?");
          } else {
            alert("🎉 All matched correctly! 🎉");
          }
        }, 100);
      }
    });
  });

  resetGame();
</script>


</body>
</html>
